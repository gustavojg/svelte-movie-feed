import{r as e,u as t,_ as r,a,i as n,s as c,b as s,S as i,A as o,c as l,e as u,t as f,q as h,d,f as v,g as p,h as m,j as b,k as g,l as E,m as y,w,n as k,L as P,M as O,H as x,I as _,o as D,p as I,J as R,K as j,y as V,v as A,x as L}from"./client.52882176.js";import{a as M,c as S,d as T,g as q,b as H}from"./urlFormat.91b287d4.js";function N(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function F(e){return function(){var t,r=D(e);if(function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}()){var a=D(this).constructor;t=Reflect.construct(r,arguments,a)}else t=r.apply(this,arguments);return I(this,t)}}function U(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,a)}return r}function Y(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?U(Object(r),!0).forEach(function(t){N(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):U(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var B=R.document;function C(e,t,r){var a=e.slice();return a[8]=t[r],a}function J(e){var t,r,a=e[7].message+"";return{c:function(){t=u("p"),r=f(a),this.h()},l:function(e){t=p(e,"P",{style:!0});var n=m(t);r=b(n,a),n.forEach(d),this.h()},h:function(){j(t,"color","red")},m:function(e,a){E(e,t,a),y(t,r)},p:function(e,t){1&t&&a!==(a=e[7].message+"")&&V(r,a)},d:function(e){e&&d(t)}}}function K(e){for(var t,r=e[6],a=[],n=0;n<r.length;n+=1)a[n]=W(C(e,r,n));return{c:function(){for(var e=0;e<a.length;e+=1)a[e].c();t=A()},l:function(e){for(var r=0;r<a.length;r+=1)a[r].l(e);t=A()},m:function(e,r){for(var n=0;n<a.length;n+=1)a[n].m(e,r);E(e,t,r)},p:function(e,n){if(1&n){var c;for(r=e[6],c=0;c<r.length;c+=1){var s=C(e,r,c);a[c]?a[c].p(s,n):(a[c]=W(s),a[c].c(),a[c].m(t.parentNode,t))}for(;c<a.length;c+=1)a[c].d(1);a.length=r.length}},d:function(e){L(a,e),e&&d(t)}}}function W(e){var t,r,a,n,c,s,i,o,h,w,k,P,O,x,_,D,I,R,A,L,M,S,T,H,N,F,U,Y,B,C,J,K,W,$,z,G,Q,X,Z,ee,te,re,ae,ne,ce,se,ie,oe,le,ue,fe,he,de,ve,pe,me,be,ge,Ee,ye,we,ke=e[8].display_title+"",Pe=e[8].summary_short+"",Oe=e[8].byline+"",xe=e[8].opening_date+"",_e=e[8].publication_date+"",De=e[8].date_updated+"",Ie=e[8].link.suggested_link_text+"";return{c:function(){t=u("div"),r=u("div"),a=u("header"),n=u("p"),c=u("a"),s=f(ke),o=l(),h=u("div"),w=u("p"),k=f(Pe),P=l(),O=u("p"),x=u("a"),_=f(Oe),I=l(),R=u("footer"),A=u("nav"),L=u("div"),M=u("div"),S=u("p"),T=f("Opening"),H=l(),N=u("p"),F=u("time"),U=f(xe),B=l(),C=u("div"),J=u("div"),K=u("p"),W=f("Publication"),$=l(),z=u("p"),G=u("time"),Q=f(_e),Z=l(),ee=u("div"),te=u("div"),re=u("p"),ae=f("Updated"),ne=l(),ce=u("p"),se=u("time"),ie=f(De),le=l(),ue=u("p"),fe=u("span"),he=u("a"),de=f(Ie),pe=l(),me=u("footer"),be=u("a"),ge=f("Read the complete Review"),ye=l(),we=u("hr"),this.h()},l:function(e){t=p(e,"DIV",{class:!0});var i=m(t);r=p(i,"DIV",{class:!0});var l=m(r);a=p(l,"HEADER",{class:!0});var u=m(a);n=p(u,"P",{class:!0});var f=m(n);c=p(f,"A",{href:!0,target:!0});var g=m(c);s=b(g,ke),g.forEach(d),f.forEach(d),u.forEach(d),o=v(l),h=p(l,"DIV",{class:!0});var E=m(h);w=p(E,"P",{class:!0});var y=m(w);k=b(y,Pe),y.forEach(d),P=v(E),O=p(E,"P",{class:!0});var D=m(O);x=p(D,"A",{href:!0});var j=m(x);_=b(j,Oe),j.forEach(d),D.forEach(d),E.forEach(d),I=v(l),R=p(l,"FOOTER",{class:!0});var V=m(R);A=p(V,"NAV",{class:!0});var q=m(A);L=p(q,"DIV",{class:!0});var Y=m(L);M=p(Y,"DIV",{});var X=m(M);S=p(X,"P",{class:!0});var oe=m(S);T=b(oe,"Opening"),oe.forEach(d),H=v(X),N=p(X,"P",{class:!0});var ve=m(N);F=p(ve,"TIME",{datetime:!0});var Ee=m(F);U=b(Ee,xe),Ee.forEach(d),ve.forEach(d),X.forEach(d),Y.forEach(d),B=v(q),C=p(q,"DIV",{class:!0});var Re=m(C);J=p(Re,"DIV",{});var je=m(J);K=p(je,"P",{class:!0});var Ve=m(K);W=b(Ve,"Publication"),Ve.forEach(d),$=v(je),z=p(je,"P",{class:!0});var Ae=m(z);G=p(Ae,"TIME",{datetime:!0});var Le=m(G);Q=b(Le,_e),Le.forEach(d),Ae.forEach(d),je.forEach(d),Re.forEach(d),Z=v(q),ee=p(q,"DIV",{class:!0});var Me=m(ee);te=p(Me,"DIV",{});var Se=m(te);re=p(Se,"P",{class:!0});var Te=m(re);ae=b(Te,"Updated"),Te.forEach(d),ne=v(Se),ce=p(Se,"P",{class:!0});var qe=m(ce);se=p(qe,"TIME",{datetime:!0});var He=m(se);ie=b(He,De),He.forEach(d),qe.forEach(d),Se.forEach(d),Me.forEach(d),q.forEach(d),le=v(V),ue=p(V,"P",{class:!0});var Ne=m(ue);fe=p(Ne,"SPAN",{});var Fe=m(fe);he=p(Fe,"A",{href:!0,target:!0});var Ue=m(he);de=b(Ue,Ie),Ue.forEach(d),Fe.forEach(d),Ne.forEach(d),V.forEach(d),pe=v(l),me=p(l,"FOOTER",{class:!0});var Ye=m(me);be=p(Ye,"A",{href:!0,target:!0,class:!0});var Be=m(be);ge=b(Be,"Read the complete Review"),Be.forEach(d),Ye.forEach(d),l.forEach(d),i.forEach(d),ye=v(e),we=p(e,"HR",{style:!0}),this.h()},h:function(){g(c,"href",i=e[8].link.url),g(c,"target","_blank"),g(n,"class","card-header-title"),g(a,"class","card-header"),g(w,"class","title"),g(x,"href",D="/reviews/".concat(q(e[8].byline),"/")),g(O,"class","subtitle"),g(h,"class","card-content"),g(S,"class","heading"),g(F,"datetime",Y=e[8].opening_date),g(N,"class","subtitle"),g(L,"class","level-item has-text-centered is-hidden-mobile"),g(K,"class","heading"),g(G,"datetime",X=e[8].publication_date),g(z,"class","subtitle"),g(C,"class","level-item has-text-centered"),g(re,"class","heading"),g(se,"datetime",oe=e[8].date_updated),g(ce,"class","subtitle"),g(ee,"class","level-item has-text-centered"),g(A,"class","level card-footer-item"),g(he,"href",ve=e[8].link.url),g(he,"target","_blank"),g(ue,"class","card-footer-item is-hidden-mobile"),g(R,"class","card-footer"),g(be,"href",Ee=e[8].link.url),g(be,"target","_blank"),g(be,"class","button is-black is-medium is-fullwidth"),g(me,"class","card-footer is-hidden-desktop"),g(r,"class","card"),g(t,"class","container"),j(we,"margin","0 0 3rem")},m:function(e,i){E(e,t,i),y(t,r),y(r,a),y(a,n),y(n,c),y(c,s),y(r,o),y(r,h),y(h,w),y(w,k),y(h,P),y(h,O),y(O,x),y(x,_),y(r,I),y(r,R),y(R,A),y(A,L),y(L,M),y(M,S),y(S,T),y(M,H),y(M,N),y(N,F),y(F,U),y(A,B),y(A,C),y(C,J),y(J,K),y(K,W),y(J,$),y(J,z),y(z,G),y(G,Q),y(A,Z),y(A,ee),y(ee,te),y(te,re),y(re,ae),y(te,ne),y(te,ce),y(ce,se),y(se,ie),y(R,le),y(R,ue),y(ue,fe),y(fe,he),y(he,de),y(r,pe),y(r,me),y(me,be),y(be,ge),E(e,ye,i),E(e,we,i)},p:function(e,t){1&t&&ke!==(ke=e[8].display_title+"")&&V(s,ke),1&t&&i!==(i=e[8].link.url)&&g(c,"href",i),1&t&&Pe!==(Pe=e[8].summary_short+"")&&V(k,Pe),1&t&&Oe!==(Oe=e[8].byline+"")&&V(_,Oe),1&t&&D!==(D="/reviews/".concat(q(e[8].byline),"/"))&&g(x,"href",D),1&t&&xe!==(xe=e[8].opening_date+"")&&V(U,xe),1&t&&Y!==(Y=e[8].opening_date)&&g(F,"datetime",Y),1&t&&_e!==(_e=e[8].publication_date+"")&&V(Q,_e),1&t&&X!==(X=e[8].publication_date)&&g(G,"datetime",X),1&t&&De!==(De=e[8].date_updated+"")&&V(ie,De),1&t&&oe!==(oe=e[8].date_updated)&&g(se,"datetime",oe),1&t&&Ie!==(Ie=e[8].link.suggested_link_text+"")&&V(de,Ie),1&t&&ve!==(ve=e[8].link.url)&&g(he,"href",ve),1&t&&Ee!==(Ee=e[8].link.url)&&g(be,"href",Ee)},d:function(e){e&&d(t),e&&d(ye),e&&d(we)}}}function $(e){var t,r;return{c:function(){t=u("p"),r=f("...waiting")},l:function(e){t=p(e,"P",{});var a=m(t);r=b(a,"...waiting"),a.forEach(d)},m:function(e,a){E(e,t,a),y(t,r)},p:k,d:function(e){e&&d(t)}}}function z(e){var t,r,a,n,c,s,i,P,O,x,_={ctx:e,current:null,token:null,pending:$,then:K,catch:J,value:6,error:7};return o(P=e[0],_),{c:function(){t=l(),r=u("div"),a=u("header"),n=u("div"),c=u("h1"),s=f("New York Times Movie Reviews"),i=l(),_.block.c(),O=l(),x=u("div"),this.h()},l:function(e){h('[data-svelte="svelte-1oxw8qd"]',B.head).forEach(d),t=v(e),r=p(e,"DIV",{class:!0});var o=m(r);a=p(o,"HEADER",{class:!0});var l=m(a);n=p(l,"DIV",{class:!0});var u=m(n);c=p(u,"H1",{class:!0});var f=m(c);s=b(f,"New York Times Movie Reviews"),f.forEach(d),u.forEach(d),l.forEach(d),i=v(o),_.block.l(o),o.forEach(d),O=v(e),x=p(e,"DIV",{id:!0}),m(x).forEach(d),this.h()},h:function(){B.title="Review",g(c,"class","title"),g(n,"class","bd-header-titles"),g(a,"class","bd-header"),g(r,"class","bd-main-container container"),g(x,"id","endPage")},m:function(e,o){E(e,t,o),E(e,r,o),y(r,a),y(a,n),y(n,c),y(c,s),y(r,i),_.block.m(r,_.anchor=null),_.mount=function(){return r},_.anchor=null,E(e,O,o),E(e,x,o)},p:function(t,r){var a=w(r,1)[0];if(e=t,_.ctx=e,1&a&&P!==(P=e[0])&&o(P,_));else{var n=e.slice();n[6]=_.resolved,_.block.p(n,a)}},i:k,o:k,d:function(e){e&&d(t),e&&d(r),_.block.d(),_.token=null,_=null,e&&d(O),e&&d(x)}}}function G(e){return Q.apply(this,arguments)}function Q(){return(Q=e(t.mark(function e(r){var a,n,c,s,i;return t.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r.path,r.query,a=r.params,e.t0=a.slug[0].toString(),e.next="year"===e.t0?4:6;break;case 4:return n=S({year:a.slug[1]}),e.abrupt("break",8);case 6:return n=S({query:T(a.slug[1]),reviewer:T(a.slug[0])}),e.abrupt("break",8);case 8:return e.next=10,this.fetch("https://api.nytimes.com/svc/movies/v2/reviews/search.json?api-key=".concat(M,"&").concat(n));case 10:return c=e.sent,e.next=13,c.json();case 13:if(!(s=e.sent)){e.next=19;break}return i=s.results,e.abrupt("return",{articleList:i});case 19:throw new Error(s);case 20:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function X(r,a,n){var c,s=P().page;O(r,s,function(e){return n(3,c=e)});var i,o=c.params.slug,l=a.articleList;switch(o[0]){case"year":i={year:o[1]};break;default:i={query:T(o[1]),reviewer:T(o[0])}}return x(function(e){}),_(function(){var r=20,a=document.querySelector("#endPage");if("undefined"!=typeof IntersectionObserver){var c=new IntersectionObserver(function(){var a=e(t.mark(function e(a){var c;return t.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!0!==a[0].isIntersecting){e.next=6;break}return e.next=3,H(Y({offset:r},i));case 3:c=e.sent,n(0,l=l.concat(c)),r+=20;case 6:case"end":return e.stop()}},e)}));return function(e){return a.apply(this,arguments)}}(),{rootMargin:"0px 0px 300px 0px"});return c.observe(a),function(){return c.unobserve(a)}}var s=function e(){var t=a.getBoundingClientRect();intersecting=t.bottom+bottom>0&&t.right+right>0&&t.top-top<window.innerHeight&&t.left-left<window.innerWidth,intersecting&&once&&window.removeEventListener("scroll",e)};return window.addEventListener("scroll",s),function(){return window.removeEventListener("scroll",s)}}),r.$set=function(e){"articleList"in e&&n(0,l=e.articleList)},[l,s]}export default(function(e){r(o,i);var t=F(o);function o(e){var r;return a(this,o),r=t.call(this),n(s(r),e,X,z,c,{articleList:0}),r}return o}());export{G as preload};

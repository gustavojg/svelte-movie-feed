import{S as e,i as a,s as t,p as s,a as r,e as c,t as i,q as l,d as n,c as o,b as d,f as h,g as f,h as v,j as u,k as p,n as m,D as g,E,z as b,A as w,B as k,C as y,o as _,l as I,m as P}from"./client.9cb0aca5.js";import{c as x,d as D,a as R,g as V,b as A}from"./urlFormat.7956c57f.js";const{document:L}=k;function O(e,a,t){const s=e.slice();return s[8]=a[t],s}function T(e){let a,t,s=e[7].message+"";return{c(){a=c("p"),t=i(s),this.h()},l(e){a=d(e,"P",{style:!0});var r=h(a);t=f(r,s),r.forEach(n),this.h()},h(){y(a,"color","red")},m(e,s){u(e,a,s),p(a,t)},p(e,a){1&a&&s!==(s=e[7].message+"")&&_(t,s)},d(e){e&&n(a)}}}function q(e){let a,t=e[6],s=[];for(let a=0;a<t.length;a+=1)s[a]=M(O(e,t,a));return{c(){for(let e=0;e<s.length;e+=1)s[e].c();a=I()},l(e){for(let a=0;a<s.length;a+=1)s[a].l(e);a=I()},m(e,t){for(let a=0;a<s.length;a+=1)s[a].m(e,t);u(e,a,t)},p(e,r){if(1&r){let c;for(t=e[6],c=0;c<t.length;c+=1){const i=O(e,t,c);s[c]?s[c].p(i,r):(s[c]=M(i),s[c].c(),s[c].m(a.parentNode,a))}for(;c<s.length;c+=1)s[c].d(1);s.length=t.length}},d(e){P(s,e),e&&n(a)}}}function M(e){let a,t,s,l,m,g,E,b,w,k,I,P,x,D,R,V,L,O,T,q,M,j,H,N,$,S,F,B,C,U,Y,z,W,G,J,K,Q,X,Z,ee,ae,te,se,re,ce,ie,le,ne,oe,de,he,fe,ve,ue,pe,me,ge,Ee,be,we,ke,ye=e[8].display_title+"",_e=e[8].summary_short+"",Ie=e[8].byline+"",Pe=e[8].opening_date+"",xe=e[8].publication_date+"",De=e[8].date_updated+"",Re=e[8].link.suggested_link_text+"";return{c(){a=c("div"),t=c("div"),s=c("header"),l=c("p"),m=c("a"),g=i(ye),b=r(),w=c("div"),k=c("p"),I=i(_e),P=r(),x=c("p"),D=c("a"),R=i(Ie),L=r(),O=c("footer"),T=c("nav"),q=c("div"),M=c("div"),j=c("p"),H=i("Opening"),N=r(),$=c("p"),S=c("time"),F=i(Pe),C=r(),U=c("div"),Y=c("div"),z=c("p"),W=i("Publication"),G=r(),J=c("p"),K=c("time"),Q=i(xe),Z=r(),ee=c("div"),ae=c("div"),te=c("p"),se=i("Updated"),re=r(),ce=c("p"),ie=c("time"),le=i(De),oe=r(),de=c("p"),he=c("span"),fe=c("a"),ve=i(Re),pe=r(),me=c("footer"),ge=c("a"),Ee=i("Read the complete Review"),we=r(),ke=c("hr"),this.h()},l(e){a=d(e,"DIV",{class:!0});var r=h(a);t=d(r,"DIV",{class:!0});var c=h(t);s=d(c,"HEADER",{class:!0});var i=h(s);l=d(i,"P",{class:!0});var v=h(l);m=d(v,"A",{href:!0,target:!0});var u=h(m);g=f(u,ye),u.forEach(n),v.forEach(n),i.forEach(n),b=o(c),w=d(c,"DIV",{class:!0});var p=h(w);k=d(p,"P",{class:!0});var E=h(k);I=f(E,_e),E.forEach(n),P=o(p),x=d(p,"P",{class:!0});var y=h(x);D=d(y,"A",{href:!0});var _=h(D);R=f(_,Ie),_.forEach(n),y.forEach(n),p.forEach(n),L=o(c),O=d(c,"FOOTER",{class:!0});var V=h(O);T=d(V,"NAV",{class:!0});var A=h(T);q=d(A,"DIV",{class:!0});var B=h(q);M=d(B,"DIV",{});var X=h(M);j=d(X,"P",{class:!0});var ne=h(j);H=f(ne,"Opening"),ne.forEach(n),N=o(X),$=d(X,"P",{class:!0});var ue=h($);S=d(ue,"TIME",{datetime:!0});var be=h(S);F=f(be,Pe),be.forEach(n),ue.forEach(n),X.forEach(n),B.forEach(n),C=o(A),U=d(A,"DIV",{class:!0});var Ve=h(U);Y=d(Ve,"DIV",{});var Ae=h(Y);z=d(Ae,"P",{class:!0});var Le=h(z);W=f(Le,"Publication"),Le.forEach(n),G=o(Ae),J=d(Ae,"P",{class:!0});var Oe=h(J);K=d(Oe,"TIME",{datetime:!0});var Te=h(K);Q=f(Te,xe),Te.forEach(n),Oe.forEach(n),Ae.forEach(n),Ve.forEach(n),Z=o(A),ee=d(A,"DIV",{class:!0});var qe=h(ee);ae=d(qe,"DIV",{});var Me=h(ae);te=d(Me,"P",{class:!0});var je=h(te);se=f(je,"Updated"),je.forEach(n),re=o(Me),ce=d(Me,"P",{class:!0});var He=h(ce);ie=d(He,"TIME",{datetime:!0});var Ne=h(ie);le=f(Ne,De),Ne.forEach(n),He.forEach(n),Me.forEach(n),qe.forEach(n),A.forEach(n),oe=o(V),de=d(V,"P",{class:!0});var $e=h(de);he=d($e,"SPAN",{});var Se=h(he);fe=d(Se,"A",{href:!0,target:!0});var Fe=h(fe);ve=f(Fe,Re),Fe.forEach(n),Se.forEach(n),$e.forEach(n),V.forEach(n),pe=o(c),me=d(c,"FOOTER",{class:!0});var Be=h(me);ge=d(Be,"A",{href:!0,target:!0,class:!0});var Ce=h(ge);Ee=f(Ce,"Read the complete Review"),Ce.forEach(n),Be.forEach(n),c.forEach(n),r.forEach(n),we=o(e),ke=d(e,"HR",{style:!0}),this.h()},h(){v(m,"href",E=e[8].link.url),v(m,"target","_blank"),v(l,"class","card-header-title"),v(s,"class","card-header"),v(k,"class","title"),v(D,"href",V=`/reviews/${A(e[8].byline)}/`),v(x,"class","subtitle"),v(w,"class","card-content"),v(j,"class","heading"),v(S,"datetime",B=e[8].opening_date),v($,"class","subtitle"),v(q,"class","level-item has-text-centered is-hidden-mobile"),v(z,"class","heading"),v(K,"datetime",X=e[8].publication_date),v(J,"class","subtitle"),v(U,"class","level-item has-text-centered"),v(te,"class","heading"),v(ie,"datetime",ne=e[8].date_updated),v(ce,"class","subtitle"),v(ee,"class","level-item has-text-centered"),v(T,"class","level card-footer-item"),v(fe,"href",ue=e[8].link.url),v(fe,"target","_blank"),v(de,"class","card-footer-item is-hidden-mobile"),v(O,"class","card-footer"),v(ge,"href",be=e[8].link.url),v(ge,"target","_blank"),v(ge,"class","button is-black is-medium is-fullwidth"),v(me,"class","card-footer is-hidden-desktop"),v(t,"class","card"),v(a,"class","container"),y(ke,"margin","0 0 3rem")},m(e,r){u(e,a,r),p(a,t),p(t,s),p(s,l),p(l,m),p(m,g),p(t,b),p(t,w),p(w,k),p(k,I),p(w,P),p(w,x),p(x,D),p(D,R),p(t,L),p(t,O),p(O,T),p(T,q),p(q,M),p(M,j),p(j,H),p(M,N),p(M,$),p($,S),p(S,F),p(T,C),p(T,U),p(U,Y),p(Y,z),p(z,W),p(Y,G),p(Y,J),p(J,K),p(K,Q),p(T,Z),p(T,ee),p(ee,ae),p(ae,te),p(te,se),p(ae,re),p(ae,ce),p(ce,ie),p(ie,le),p(O,oe),p(O,de),p(de,he),p(he,fe),p(fe,ve),p(t,pe),p(t,me),p(me,ge),p(ge,Ee),u(e,we,r),u(e,ke,r)},p(e,a){1&a&&ye!==(ye=e[8].display_title+"")&&_(g,ye),1&a&&E!==(E=e[8].link.url)&&v(m,"href",E),1&a&&_e!==(_e=e[8].summary_short+"")&&_(I,_e),1&a&&Ie!==(Ie=e[8].byline+"")&&_(R,Ie),1&a&&V!==(V=`/reviews/${A(e[8].byline)}/`)&&v(D,"href",V),1&a&&Pe!==(Pe=e[8].opening_date+"")&&_(F,Pe),1&a&&B!==(B=e[8].opening_date)&&v(S,"datetime",B),1&a&&xe!==(xe=e[8].publication_date+"")&&_(Q,xe),1&a&&X!==(X=e[8].publication_date)&&v(K,"datetime",X),1&a&&De!==(De=e[8].date_updated+"")&&_(le,De),1&a&&ne!==(ne=e[8].date_updated)&&v(ie,"datetime",ne),1&a&&Re!==(Re=e[8].link.suggested_link_text+"")&&_(ve,Re),1&a&&ue!==(ue=e[8].link.url)&&v(fe,"href",ue),1&a&&be!==(be=e[8].link.url)&&v(ge,"href",be)},d(e){e&&n(a),e&&n(we),e&&n(ke)}}}function j(e){let a,t;return{c(){a=c("p"),t=i("...waiting")},l(e){a=d(e,"P",{});var s=h(a);t=f(s,"...waiting"),s.forEach(n)},m(e,s){u(e,a,s),p(a,t)},p:m,d(e){e&&n(a)}}}function H(e){let a,t,g,E,b,w,k,y,_,I,P={ctx:e,current:null,token:null,pending:j,then:q,catch:T,value:6,error:7};return s(y=e[0],P),{c(){a=r(),t=c("div"),g=c("header"),E=c("div"),b=c("h1"),w=i("New York Times Movie Reviews"),k=r(),P.block.c(),_=r(),I=c("div"),this.h()},l(e){l('[data-svelte="svelte-1oxw8qd"]',L.head).forEach(n),a=o(e),t=d(e,"DIV",{class:!0});var s=h(t);g=d(s,"HEADER",{class:!0});var r=h(g);E=d(r,"DIV",{class:!0});var c=h(E);b=d(c,"H1",{class:!0});var i=h(b);w=f(i,"New York Times Movie Reviews"),i.forEach(n),c.forEach(n),r.forEach(n),k=o(s),P.block.l(s),s.forEach(n),_=o(e),I=d(e,"DIV",{id:!0}),h(I).forEach(n),this.h()},h(){L.title="Review",v(b,"class","title"),v(E,"class","bd-header-titles"),v(g,"class","bd-header"),v(t,"class","bd-main-container container"),v(I,"id","endPage")},m(e,s){u(e,a,s),u(e,t,s),p(t,g),p(g,E),p(E,b),p(b,w),p(t,k),P.block.m(t,P.anchor=null),P.mount=(()=>t),P.anchor=null,u(e,_,s),u(e,I,s)},p(a,[t]){if(e=a,P.ctx=e,1&t&&y!==(y=e[0])&&s(y,P));else{const a=e.slice();a[6]=P.resolved,P.block.p(a,t)}},i:m,o:m,d(e){e&&n(a),e&&n(t),P.block.d(),P.token=null,P=null,e&&n(_),e&&n(I)}}}async function N({path:e,query:a,params:t}){let s;switch(t.slug[0].toString()){case"year":s=x({year:t.slug[1]});break;default:s=x({query:D(t.slug[1]),reviewer:D(t.slug[0])})}const r=await this.fetch(`https://api.nytimes.com/svc/movies/v2/reviews/search.json?api-key=${R}&${s}`),c=await r.json();if(c){return{articleList:c.results}}throw new Error(c)}function $(e,a,t){let s;const{page:r}=g();E(e,r,e=>t(3,s=e));const{slug:c}=s.params;let i,{articleList:l}=a;switch(c[0]){case"year":i={year:c[1]};break;default:i={query:D(c[1]),reviewer:D(c[0])}}return b(e=>{}),w(()=>{let e=20;const a=document.querySelector("#endPage");if("undefined"!=typeof IntersectionObserver){const s=new IntersectionObserver(async a=>{if(!0===a[0].isIntersecting){const a=await V({offset:e,...i});t(0,l=l.concat(a)),e+=20}},{rootMargin:"0px 0px 300px 0px"});return s.observe(a),()=>s.unobserve(a)}const s=()=>{const e=a.getBoundingClientRect();intersecting=e.bottom+bottom>0&&e.right+right>0&&e.top-top<window.innerHeight&&e.left-left<window.innerWidth,intersecting&&once&&window.removeEventListener("scroll",s)};return window.addEventListener("scroll",s),()=>window.removeEventListener("scroll",s)}),e.$set=(e=>{"articleList"in e&&t(0,l=e.articleList)}),[l,r]}export default class extends e{constructor(e){super(),a(this,e,$,H,t,{articleList:0})}}export{N as preload};

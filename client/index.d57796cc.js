import{S as e,i as a,s,l as t,a as r,e as c,t as l,q as i,d as n,c as o,b as h,f as d,g as f,h as v,j as p,k as u,n as m,m as E,o as g,p as b,r as k,u as w,v as I,w as _}from"./client.0017aa1b.js";import{a as P,g as y,b as D}from"./urlFormat.0066cd0b.js";const{document:L}=b;function x(e,a,s){const t=e.slice();return t[4]=a[s],t}function V(e){let a,s,t=e[3].message+"";return{c(){a=c("p"),s=l(t),this.h()},l(e){a=h(e,"P",{style:!0});var r=d(a);s=f(r,t),r.forEach(n),this.h()},h(){k(a,"color","red")},m(e,t){p(e,a,t),u(a,s)},p(e,a){1&a&&t!==(t=e[3].message+"")&&w(s,t)},d(e){e&&n(a)}}}function A(e){let a,s=e[2],t=[];for(let a=0;a<s.length;a+=1)t[a]=R(x(e,s,a));return{c(){for(let e=0;e<t.length;e+=1)t[e].c();a=I()},l(e){for(let a=0;a<t.length;a+=1)t[a].l(e);a=I()},m(e,s){for(let a=0;a<t.length;a+=1)t[a].m(e,s);p(e,a,s)},p(e,r){if(1&r){let c;for(s=e[2],c=0;c<s.length;c+=1){const l=x(e,s,c);t[c]?t[c].p(l,r):(t[c]=R(l),t[c].c(),t[c].m(a.parentNode,a))}for(;c<t.length;c+=1)t[c].d(1);t.length=s.length}},d(e){_(t,e),e&&n(a)}}}function R(e){let a,s,t,i,m,E,g,b,I,_,P,y,L,x,V,A,R,N,O,T,M,S,j,H,$,q,F,U,Y,z,B,C,W,G,J,K,Q,X,Z,ee,ae,se,te,re,ce,le,ie,ne,oe,he,de,fe,ve,pe,ue,me,Ee,ge,be,ke,we,Ie=e[4].display_title+"",_e=e[4].summary_short+"",Pe=e[4].byline+"",ye=e[4].opening_date+"",De=e[4].publication_date+"",Le=e[4].date_updated+"",xe=e[4].link.suggested_link_text+"";return{c(){a=c("div"),s=c("div"),t=c("header"),i=c("p"),m=c("a"),E=l(Ie),b=r(),I=c("div"),_=c("p"),P=l(_e),y=r(),L=c("p"),x=c("a"),V=l(Pe),R=r(),N=c("footer"),O=c("nav"),T=c("div"),M=c("div"),S=c("p"),j=l("Opening"),H=r(),$=c("p"),q=c("time"),F=l(ye),Y=r(),z=c("div"),B=c("div"),C=c("p"),W=l("Publication"),G=r(),J=c("p"),K=c("time"),Q=l(De),Z=r(),ee=c("div"),ae=c("div"),se=c("p"),te=l("Updated"),re=r(),ce=c("p"),le=c("time"),ie=l(Le),oe=r(),he=c("p"),de=c("span"),fe=c("a"),ve=l(xe),ue=r(),me=c("footer"),Ee=c("a"),ge=l("Read the complete Review"),ke=r(),we=c("hr"),this.h()},l(e){a=h(e,"DIV",{class:!0});var r=d(a);s=h(r,"DIV",{class:!0});var c=d(s);t=h(c,"HEADER",{class:!0});var l=d(t);i=h(l,"P",{class:!0});var v=d(i);m=h(v,"A",{href:!0,target:!0});var p=d(m);E=f(p,Ie),p.forEach(n),v.forEach(n),l.forEach(n),b=o(c),I=h(c,"DIV",{class:!0});var u=d(I);_=h(u,"P",{class:!0});var g=d(_);P=f(g,_e),g.forEach(n),y=o(u),L=h(u,"P",{class:!0});var k=d(L);x=h(k,"A",{href:!0});var w=d(x);V=f(w,Pe),w.forEach(n),k.forEach(n),u.forEach(n),R=o(c),N=h(c,"FOOTER",{class:!0});var D=d(N);O=h(D,"NAV",{class:!0});var A=d(O);T=h(A,"DIV",{class:!0});var U=d(T);M=h(U,"DIV",{});var X=d(M);S=h(X,"P",{class:!0});var ne=d(S);j=f(ne,"Opening"),ne.forEach(n),H=o(X),$=h(X,"P",{class:!0});var pe=d($);q=h(pe,"TIME",{datetime:!0});var be=d(q);F=f(be,ye),be.forEach(n),pe.forEach(n),X.forEach(n),U.forEach(n),Y=o(A),z=h(A,"DIV",{class:!0});var Ve=d(z);B=h(Ve,"DIV",{});var Ae=d(B);C=h(Ae,"P",{class:!0});var Re=d(C);W=f(Re,"Publication"),Re.forEach(n),G=o(Ae),J=h(Ae,"P",{class:!0});var Ne=d(J);K=h(Ne,"TIME",{datetime:!0});var Oe=d(K);Q=f(Oe,De),Oe.forEach(n),Ne.forEach(n),Ae.forEach(n),Ve.forEach(n),Z=o(A),ee=h(A,"DIV",{class:!0});var Te=d(ee);ae=h(Te,"DIV",{});var Me=d(ae);se=h(Me,"P",{class:!0});var Se=d(se);te=f(Se,"Updated"),Se.forEach(n),re=o(Me),ce=h(Me,"P",{class:!0});var je=d(ce);le=h(je,"TIME",{datetime:!0});var He=d(le);ie=f(He,Le),He.forEach(n),je.forEach(n),Me.forEach(n),Te.forEach(n),A.forEach(n),oe=o(D),he=h(D,"P",{class:!0});var $e=d(he);de=h($e,"SPAN",{});var qe=d(de);fe=h(qe,"A",{href:!0,target:!0});var Fe=d(fe);ve=f(Fe,xe),Fe.forEach(n),qe.forEach(n),$e.forEach(n),D.forEach(n),ue=o(c),me=h(c,"FOOTER",{class:!0});var Ue=d(me);Ee=h(Ue,"A",{href:!0,target:!0,class:!0});var Ye=d(Ee);ge=f(Ye,"Read the complete Review"),Ye.forEach(n),Ue.forEach(n),c.forEach(n),r.forEach(n),ke=o(e),we=h(e,"HR",{style:!0}),this.h()},h(){v(m,"href",g=e[4].link.url),v(m,"target","_blank"),v(i,"class","card-header-title"),v(t,"class","card-header"),v(_,"class","title"),v(x,"href",A=`./reviews/${D(e[4].byline)}/`),v(L,"class","subtitle"),v(I,"class","card-content"),v(S,"class","heading"),v(q,"datetime",U=e[4].opening_date),v($,"class","subtitle"),v(T,"class","level-item has-text-centered is-hidden-mobile"),v(C,"class","heading"),v(K,"datetime",X=e[4].publication_date),v(J,"class","subtitle"),v(z,"class","level-item has-text-centered"),v(se,"class","heading"),v(le,"datetime",ne=e[4].date_updated),v(ce,"class","subtitle"),v(ee,"class","level-item has-text-centered"),v(O,"class","level card-footer-item"),v(fe,"href",pe=e[4].link.url),v(fe,"target","_blank"),v(he,"class","card-footer-item is-hidden-mobile"),v(N,"class","card-footer"),v(Ee,"href",be=e[4].link.url),v(Ee,"target","_blank"),v(Ee,"class","button is-black is-medium is-fullwidth"),v(me,"class","card-footer is-hidden-desktop"),v(s,"class","card"),v(a,"class","container"),k(we,"margin","0 0 3rem")},m(e,r){p(e,a,r),u(a,s),u(s,t),u(t,i),u(i,m),u(m,E),u(s,b),u(s,I),u(I,_),u(_,P),u(I,y),u(I,L),u(L,x),u(x,V),u(s,R),u(s,N),u(N,O),u(O,T),u(T,M),u(M,S),u(S,j),u(M,H),u(M,$),u($,q),u(q,F),u(O,Y),u(O,z),u(z,B),u(B,C),u(C,W),u(B,G),u(B,J),u(J,K),u(K,Q),u(O,Z),u(O,ee),u(ee,ae),u(ae,se),u(se,te),u(ae,re),u(ae,ce),u(ce,le),u(le,ie),u(N,oe),u(N,he),u(he,de),u(de,fe),u(fe,ve),u(s,ue),u(s,me),u(me,Ee),u(Ee,ge),p(e,ke,r),p(e,we,r)},p(e,a){1&a&&Ie!==(Ie=e[4].display_title+"")&&w(E,Ie),1&a&&g!==(g=e[4].link.url)&&v(m,"href",g),1&a&&_e!==(_e=e[4].summary_short+"")&&w(P,_e),1&a&&Pe!==(Pe=e[4].byline+"")&&w(V,Pe),1&a&&A!==(A=`./reviews/${D(e[4].byline)}/`)&&v(x,"href",A),1&a&&ye!==(ye=e[4].opening_date+"")&&w(F,ye),1&a&&U!==(U=e[4].opening_date)&&v(q,"datetime",U),1&a&&De!==(De=e[4].publication_date+"")&&w(Q,De),1&a&&X!==(X=e[4].publication_date)&&v(K,"datetime",X),1&a&&Le!==(Le=e[4].date_updated+"")&&w(ie,Le),1&a&&ne!==(ne=e[4].date_updated)&&v(le,"datetime",ne),1&a&&xe!==(xe=e[4].link.suggested_link_text+"")&&w(ve,xe),1&a&&pe!==(pe=e[4].link.url)&&v(fe,"href",pe),1&a&&be!==(be=e[4].link.url)&&v(Ee,"href",be)},d(e){e&&n(a),e&&n(ke),e&&n(we)}}}function N(e){let a,s;return{c(){a=c("p"),s=l("...waiting")},l(e){a=h(e,"P",{});var t=d(a);s=f(t,"...waiting"),t.forEach(n)},m(e,t){p(e,a,t),u(a,s)},p:m,d(e){e&&n(a)}}}function O(e){let a,s,E,g,b,k,w,I,_,P,y,D,x,R,O,T,M,S,j,H,$,q,F,U,Y,z,B,C,W,G={ctx:e,current:null,token:null,pending:N,then:A,catch:V,value:2,error:3};return t(B=e[0],G),{c(){a=r(),s=c("div"),E=c("header"),g=c("div"),b=c("h1"),k=l("New York Times Movie Reviews"),w=r(),I=c("ul"),_=c("li"),P=c("a"),y=l("."),D=r(),x=c("li"),R=c("a"),O=l("."),T=r(),M=c("li"),S=c("span"),j=r(),H=c("li"),$=c("span"),q=r(),F=c("li"),U=c("span"),Y=r(),z=c("div"),G.block.c(),C=r(),W=c("div"),this.h()},l(e){i('[data-svelte="svelte-40gz1s"]',L.head).forEach(n),a=o(e),s=h(e,"DIV",{class:!0});var t=d(s);E=h(t,"HEADER",{class:!0});var r=d(E);g=h(r,"DIV",{class:!0});var c=d(g);b=h(c,"H1",{class:!0});var l=d(b);k=f(l,"New York Times Movie Reviews"),l.forEach(n),c.forEach(n),w=o(r),I=h(r,"UL",{class:!0});var v=d(I);_=h(v,"LI",{class:!0});var p=d(_);P=h(p,"A",{href:!0,class:!0});var u=d(P);y=f(u,"."),u.forEach(n),p.forEach(n),D=o(v),x=h(v,"LI",{class:!0});var m=d(x);R=h(m,"A",{href:!0,class:!0});var V=d(R);O=f(V,"."),V.forEach(n),m.forEach(n),T=o(v),M=h(v,"LI",{class:!0});var A=d(M);S=h(A,"SPAN",{class:!0}),d(S).forEach(n),A.forEach(n),j=o(v),H=h(v,"LI",{class:!0});var N=d(H);$=h(N,"SPAN",{class:!0}),d($).forEach(n),N.forEach(n),q=o(v),F=h(v,"LI",{class:!0});var B=d(F);U=h(B,"SPAN",{class:!0}),d(U).forEach(n),B.forEach(n),v.forEach(n),r.forEach(n),Y=o(t),z=h(t,"DIV",{id:!0});var J=d(z);G.block.l(J),J.forEach(n),t.forEach(n),C=o(e),W=h(e,"DIV",{id:!0}),d(W).forEach(n),this.h()},h(){L.title="Reviews",v(b,"class","title"),v(g,"class","bd-header-titles"),v(P,"href","."),v(P,"class","steps-marker"),v(_,"class","steps-segment"),v(R,"href","."),v(R,"class","steps-marker"),v(x,"class","steps-segment"),v(S,"class","steps-marker"),v(M,"class","steps-segment is-active"),v($,"class","steps-marker"),v(H,"class","steps-segment"),v(U,"class","steps-marker"),v(F,"class","steps-segment"),v(I,"class","steps"),v(E,"class","bd-header"),v(z,"id","reviewsList"),v(s,"class","bd-main-container container"),v(W,"id","endPage")},m(e,t){p(e,a,t),p(e,s,t),u(s,E),u(E,g),u(g,b),u(b,k),u(E,w),u(E,I),u(I,_),u(_,P),u(P,y),u(I,D),u(I,x),u(x,R),u(R,O),u(I,T),u(I,M),u(M,S),u(I,j),u(I,H),u(H,$),u(I,q),u(I,F),u(F,U),u(s,Y),u(s,z),G.block.m(z,G.anchor=null),G.mount=(()=>z),G.anchor=null,p(e,C,t),p(e,W,t)},p(a,[s]){if(e=a,G.ctx=e,1&s&&B!==(B=e[0])&&t(B,G));else{const a=e.slice();a[2]=G.resolved,G.block.p(a,s)}},i:m,o:m,d(e){e&&n(a),e&&n(s),G.block.d(),G.token=null,G=null,e&&n(C),e&&n(W)}}}async function T({page:e,session:a,query:s}){const t=await this.fetch(`https://api.nytimes.com/svc/movies/v2/reviews/search.json?api-key=${P}&critics-pick=Y&order=by-publication-date`),r=await t.json();if(r){return{articleList:r.results}}throw new Error(r)}function M(e,a,s){let{articleList:t}=a;return E(e=>{}),g(()=>{let e=20;const a=document.querySelector("#endPage");if("undefined"!=typeof IntersectionObserver){const r=new IntersectionObserver(async a=>{if(!0===a[0].isIntersecting){const a=await y({offset:e});s(0,t=t.concat(a)),e+=20}},{rootMargin:"0px 0px 300px 0px"});return r.observe(a),()=>r.unobserve(a)}const r=()=>{const e=a.getBoundingClientRect();intersecting=e.bottom+bottom>0&&e.right+right>0&&e.top-top<window.innerHeight&&e.left-left<window.innerWidth,intersecting&&once&&window.removeEventListener("scroll",r)};return window.addEventListener("scroll",r),()=>window.removeEventListener("scroll",r)}),e.$set=(e=>{"articleList"in e&&s(0,t=e.articleList)}),[t]}export default class extends e{constructor(e){super(),a(this,e,M,O,s,{articleList:0})}}export{T as preload};

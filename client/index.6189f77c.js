import{S as e,i as t,s as a,l as s,j as r,d as l,e as c,b as i,f as n,h as o,n as h,m as d,t as f,a as u,g as v,c as p,k as m,o as g,p as E,r as b,q as w,u as k,v as y,w as I,x as _,y as P,z as x,A as D,B as L,C as $}from"./client.9cb0aca5.js";import{a as V,g as R,b as A}from"./urlFormat.7956c57f.js";function O(e,t,a){const s=e.slice();return s[1]=t[a],s}function N(e){let t,a,s,h,d,g,E,b;return{c(){t=c("li"),a=c("a"),s=f("·"),b=u(),this.h()},l(e){t=i(e,"LI",{class:!0});var r=n(t);a=i(r,"A",{href:!0,title:!0,alt:!0,"data-tooltip":!0});var c=n(a);s=v(c,"·"),c.forEach(l),b=p(r),r.forEach(l),this.h()},h(){o(a,"href",h=`reviews/year/${e[1]}`),o(a,"title",d=e[1]),o(a,"alt",g=e[1]),o(a,"data-tooltip",E=e[1]),o(t,"class","steps-segment")},m(e,l){r(e,t,l),m(t,a),m(a,s),m(t,b)},p(e,t){1&t&&h!==(h=`reviews/year/${e[1]}`)&&o(a,"href",h),1&t&&d!==(d=e[1])&&o(a,"title",d),1&t&&g!==(g=e[1])&&o(a,"alt",g),1&t&&E!==(E=e[1])&&o(a,"data-tooltip",E)},d(e){e&&l(t)}}}function T(e){let t,a,s,h,d,E,b,w=e[1]+"";return{c(){t=c("li"),a=c("span"),s=u(),h=c("div"),d=c("p"),E=f(w),b=u(),this.h()},l(e){t=i(e,"LI",{class:!0});var r=n(t);a=i(r,"SPAN",{class:!0}),n(a).forEach(l),s=p(r),h=i(r,"DIV",{class:!0});var c=n(h);d=i(c,"P",{class:!0});var o=n(d);E=v(o,w),o.forEach(l),c.forEach(l),b=p(r),r.forEach(l),this.h()},h(){o(a,"class","steps-marker"),o(d,"class","heading"),o(h,"class","steps-content"),o(t,"class","steps-segment")},m(e,l){r(e,t,l),m(t,a),m(t,s),m(t,h),m(h,d),m(d,E),m(t,b)},p(e,t){1&t&&w!==(w=e[1]+"")&&g(E,w)},d(e){e&&l(t)}}}function M(e){let t,a;function c(e,a){return(null==t||1&a)&&(t=!("0"!==e[1].charAt(3))),t?T:N}let i=c(e,-1),n=i(e);return{c(){n.c(),a=s()},l(e){n.l(e),a=s()},m(e,t){n.m(e,t),r(e,a,t)},p(e,t){i===(i=c(e,t))&&n?n.p(e,t):(n.d(1),(n=i(e))&&(n.c(),n.m(a.parentNode,a)))},d(e){n.d(e),e&&l(a)}}}function j(e){let t,a=e[0],s=[];for(let t=0;t<a.length;t+=1)s[t]=M(O(e,a,t));return{c(){t=c("ul");for(let e=0;e<s.length;e+=1)s[e].c();this.h()},l(e){t=i(e,"UL",{class:!0});var a=n(t);for(let e=0;e<s.length;e+=1)s[e].l(a);a.forEach(l),this.h()},h(){o(t,"class","steps has-gaps is-thin has-content-centered")},m(e,a){r(e,t,a);for(let e=0;e<s.length;e+=1)s[e].m(t,null)},p(e,[r]){if(1&r){let l;for(a=e[0],l=0;l<a.length;l+=1){const c=O(e,a,l);s[l]?s[l].p(c,r):(s[l]=M(c),s[l].c(),s[l].m(t,null))}for(;l<s.length;l+=1)s[l].d(1);s.length=a.length}},i:h,o:h,d(e){e&&l(t),d(s,e)}}}function H(e,t,a){let{yearList:s=[]}=t;return e.$set=(e=>{"yearList"in e&&a(0,s=e.yearList)}),[s]}class S extends e{constructor(e){super(),t(this,e,H,j,a,{yearList:0})}}const{document:Y}=L;function q(e,t,a){const s=e.slice();return s[5]=t[a],s}function F(e){let t,a,s=e[4].message+"";return{c(){t=c("p"),a=f(s),this.h()},l(e){t=i(e,"P",{style:!0});var r=n(t);a=v(r,s),r.forEach(l),this.h()},h(){$(t,"color","red")},m(e,s){r(e,t,s),m(t,a)},p(e,t){1&t&&s!==(s=e[4].message+"")&&g(a,s)},d(e){e&&l(t)}}}function U(e){let t,a=e[3],c=[];for(let t=0;t<a.length;t+=1)c[t]=z(q(e,a,t));return{c(){for(let e=0;e<c.length;e+=1)c[e].c();t=s()},l(e){for(let t=0;t<c.length;t+=1)c[t].l(e);t=s()},m(e,a){for(let t=0;t<c.length;t+=1)c[t].m(e,a);r(e,t,a)},p(e,s){if(1&s){let r;for(a=e[3],r=0;r<a.length;r+=1){const l=q(e,a,r);c[r]?c[r].p(l,s):(c[r]=z(l),c[r].c(),c[r].m(t.parentNode,t))}for(;r<c.length;r+=1)c[r].d(1);c.length=a.length}},d(e){d(c,e),e&&l(t)}}}function z(e){let t,a,s,h,d,E,b,w,k,y,I,_,P,x,D,L,V,R,O,N,T,M,j,H,S,Y,q,F,U,z,B,C,W,G,J,K,Q,X,Z,ee,te,ae,se,re,le,ce,ie,ne,oe,he,de,fe,ue,ve,pe,me,ge,Ee,be,we,ke,ye=e[5].display_title+"",Ie=e[5].summary_short+"",_e=e[5].byline+"",Pe=e[5].opening_date+"",xe=e[5].publication_date+"",De=e[5].date_updated+"",Le=e[5].link.suggested_link_text+"";return{c(){t=c("div"),a=c("div"),s=c("header"),h=c("p"),d=c("a"),E=f(ye),w=u(),k=c("div"),y=c("p"),I=f(Ie),_=u(),P=c("p"),x=c("a"),D=f(_e),V=u(),R=c("footer"),O=c("nav"),N=c("div"),T=c("div"),M=c("p"),j=f("Opening"),H=u(),S=c("p"),Y=c("time"),q=f(Pe),U=u(),z=c("div"),B=c("div"),C=c("p"),W=f("Publication"),G=u(),J=c("p"),K=c("time"),Q=f(xe),Z=u(),ee=c("div"),te=c("div"),ae=c("p"),se=f("Updated"),re=u(),le=c("p"),ce=c("time"),ie=f(De),oe=u(),he=c("p"),de=c("span"),fe=c("a"),ue=f(Le),pe=u(),me=c("footer"),ge=c("a"),Ee=f("Read the complete Review"),we=u(),ke=c("hr"),this.h()},l(e){t=i(e,"DIV",{class:!0});var r=n(t);a=i(r,"DIV",{class:!0});var c=n(a);s=i(c,"HEADER",{class:!0});var o=n(s);h=i(o,"P",{class:!0});var f=n(h);d=i(f,"A",{href:!0,target:!0});var u=n(d);E=v(u,ye),u.forEach(l),f.forEach(l),o.forEach(l),w=p(c),k=i(c,"DIV",{class:!0});var m=n(k);y=i(m,"P",{class:!0});var g=n(y);I=v(g,Ie),g.forEach(l),_=p(m),P=i(m,"P",{class:!0});var b=n(P);x=i(b,"A",{href:!0});var L=n(x);D=v(L,_e),L.forEach(l),b.forEach(l),m.forEach(l),V=p(c),R=i(c,"FOOTER",{class:!0});var $=n(R);O=i($,"NAV",{class:!0});var A=n(O);N=i(A,"DIV",{class:!0});var F=n(N);T=i(F,"DIV",{});var X=n(T);M=i(X,"P",{class:!0});var ne=n(M);j=v(ne,"Opening"),ne.forEach(l),H=p(X),S=i(X,"P",{class:!0});var ve=n(S);Y=i(ve,"TIME",{datetime:!0});var be=n(Y);q=v(be,Pe),be.forEach(l),ve.forEach(l),X.forEach(l),F.forEach(l),U=p(A),z=i(A,"DIV",{class:!0});var $e=n(z);B=i($e,"DIV",{});var Ve=n(B);C=i(Ve,"P",{class:!0});var Re=n(C);W=v(Re,"Publication"),Re.forEach(l),G=p(Ve),J=i(Ve,"P",{class:!0});var Ae=n(J);K=i(Ae,"TIME",{datetime:!0});var Oe=n(K);Q=v(Oe,xe),Oe.forEach(l),Ae.forEach(l),Ve.forEach(l),$e.forEach(l),Z=p(A),ee=i(A,"DIV",{class:!0});var Ne=n(ee);te=i(Ne,"DIV",{});var Te=n(te);ae=i(Te,"P",{class:!0});var Me=n(ae);se=v(Me,"Updated"),Me.forEach(l),re=p(Te),le=i(Te,"P",{class:!0});var je=n(le);ce=i(je,"TIME",{datetime:!0});var He=n(ce);ie=v(He,De),He.forEach(l),je.forEach(l),Te.forEach(l),Ne.forEach(l),A.forEach(l),oe=p($),he=i($,"P",{class:!0});var Se=n(he);de=i(Se,"SPAN",{});var Ye=n(de);fe=i(Ye,"A",{href:!0,target:!0});var qe=n(fe);ue=v(qe,Le),qe.forEach(l),Ye.forEach(l),Se.forEach(l),$.forEach(l),pe=p(c),me=i(c,"FOOTER",{class:!0});var Fe=n(me);ge=i(Fe,"A",{href:!0,target:!0,class:!0});var Ue=n(ge);Ee=v(Ue,"Read the complete Review"),Ue.forEach(l),Fe.forEach(l),c.forEach(l),r.forEach(l),we=p(e),ke=i(e,"HR",{style:!0}),this.h()},h(){o(d,"href",b=e[5].link.url),o(d,"target","_blank"),o(h,"class","card-header-title"),o(s,"class","card-header"),o(y,"class","title"),o(x,"href",L=`./reviews/${A(e[5].byline)}/`),o(P,"class","subtitle"),o(k,"class","card-content"),o(M,"class","heading"),o(Y,"datetime",F=e[5].opening_date),o(S,"class","subtitle"),o(N,"class","level-item has-text-centered is-hidden-mobile"),o(C,"class","heading"),o(K,"datetime",X=e[5].publication_date),o(J,"class","subtitle"),o(z,"class","level-item has-text-centered"),o(ae,"class","heading"),o(ce,"datetime",ne=e[5].date_updated),o(le,"class","subtitle"),o(ee,"class","level-item has-text-centered"),o(O,"class","level card-footer-item"),o(fe,"href",ve=e[5].link.url),o(fe,"target","_blank"),o(he,"class","card-footer-item is-hidden-mobile"),o(R,"class","card-footer"),o(ge,"href",be=e[5].link.url),o(ge,"target","_blank"),o(ge,"class","button is-black is-medium is-fullwidth"),o(me,"class","card-footer is-hidden-desktop"),o(a,"class","card"),o(t,"class","container"),$(ke,"margin","0 0 3rem")},m(e,l){r(e,t,l),m(t,a),m(a,s),m(s,h),m(h,d),m(d,E),m(a,w),m(a,k),m(k,y),m(y,I),m(k,_),m(k,P),m(P,x),m(x,D),m(a,V),m(a,R),m(R,O),m(O,N),m(N,T),m(T,M),m(M,j),m(T,H),m(T,S),m(S,Y),m(Y,q),m(O,U),m(O,z),m(z,B),m(B,C),m(C,W),m(B,G),m(B,J),m(J,K),m(K,Q),m(O,Z),m(O,ee),m(ee,te),m(te,ae),m(ae,se),m(te,re),m(te,le),m(le,ce),m(ce,ie),m(R,oe),m(R,he),m(he,de),m(de,fe),m(fe,ue),m(a,pe),m(a,me),m(me,ge),m(ge,Ee),r(e,we,l),r(e,ke,l)},p(e,t){1&t&&ye!==(ye=e[5].display_title+"")&&g(E,ye),1&t&&b!==(b=e[5].link.url)&&o(d,"href",b),1&t&&Ie!==(Ie=e[5].summary_short+"")&&g(I,Ie),1&t&&_e!==(_e=e[5].byline+"")&&g(D,_e),1&t&&L!==(L=`./reviews/${A(e[5].byline)}/`)&&o(x,"href",L),1&t&&Pe!==(Pe=e[5].opening_date+"")&&g(q,Pe),1&t&&F!==(F=e[5].opening_date)&&o(Y,"datetime",F),1&t&&xe!==(xe=e[5].publication_date+"")&&g(Q,xe),1&t&&X!==(X=e[5].publication_date)&&o(K,"datetime",X),1&t&&De!==(De=e[5].date_updated+"")&&g(ie,De),1&t&&ne!==(ne=e[5].date_updated)&&o(ce,"datetime",ne),1&t&&Le!==(Le=e[5].link.suggested_link_text+"")&&g(ue,Le),1&t&&ve!==(ve=e[5].link.url)&&o(fe,"href",ve),1&t&&be!==(be=e[5].link.url)&&o(ge,"href",be)},d(e){e&&l(t),e&&l(we),e&&l(ke)}}}function B(e){let t,a;return{c(){t=c("p"),a=f("...waiting")},l(e){t=i(e,"P",{});var s=n(t);a=v(s,"...waiting"),s.forEach(l)},m(e,s){r(e,t,s),m(t,a)},p:h,d(e){e&&l(t)}}}function C(e){let t,a,s,h,d,g,x,D,L,$,V,R,A,O;const N=new S({props:{yearList:e[1]()}});let T={ctx:e,current:null,token:null,pending:B,then:U,catch:F,value:3,error:4};return E(V=e[0],T),{c(){t=u(),a=c("div"),s=c("header"),h=c("div"),d=c("h1"),g=f("New York Times Movie Reviews"),x=u(),D=c("div"),b(N.$$.fragment),L=u(),$=c("div"),T.block.c(),R=u(),A=c("div"),this.h()},l(e){w('[data-svelte="svelte-40gz1s"]',Y.head).forEach(l),t=p(e),a=i(e,"DIV",{class:!0});var r=n(a);s=i(r,"HEADER",{class:!0});var c=n(s);h=i(c,"DIV",{class:!0});var o=n(h);d=i(o,"H1",{class:!0});var f=n(d);g=v(f,"New York Times Movie Reviews"),f.forEach(l),x=p(o),D=i(o,"DIV",{class:!0});var u=n(D);k(N.$$.fragment,u),u.forEach(l),o.forEach(l),c.forEach(l),L=p(r),$=i(r,"DIV",{id:!0});var m=n($);T.block.l(m),m.forEach(l),r.forEach(l),R=p(e),A=i(e,"DIV",{id:!0}),n(A).forEach(l),this.h()},h(){Y.title="Reviews",o(d,"class","title is-full"),o(D,"class","subtitle is-full"),o(h,"class","bd-header-titles"),o(s,"class","bd-header is-flex"),o($,"id","reviewsList"),o(a,"class","bd-main-container container"),o(A,"id","endPage")},m(e,l){r(e,t,l),r(e,a,l),m(a,s),m(s,h),m(h,d),m(d,g),m(h,x),m(h,D),y(N,D,null),m(a,L),m(a,$),T.block.m($,T.anchor=null),T.mount=(()=>$),T.anchor=null,r(e,R,l),r(e,A,l),O=!0},p(t,[a]){if(e=t,T.ctx=e,1&a&&V!==(V=e[0])&&E(V,T));else{const t=e.slice();t[3]=T.resolved,T.block.p(t,a)}},i(e){O||(I(N.$$.fragment,e),O=!0)},o(e){_(N.$$.fragment,e),O=!1},d(e){e&&l(t),e&&l(a),P(N),T.block.d(),T.token=null,T=null,e&&l(R),e&&l(A)}}}async function W({page:e,session:t,query:a}){const s=await this.fetch(`https://api.nytimes.com/svc/movies/v2/reviews/search.json?api-key=${V}&critics-pick=Y&order=by-publication-date`),r=await s.json();if(r){return{articleList:r.results}}throw new Error(r)}function G(e,t,a){let{articleList:s}=t;x(e=>{});return D(()=>{let e=20;const t=document.querySelector("#endPage");if("undefined"!=typeof IntersectionObserver){const r=new IntersectionObserver(async t=>{if(!0===t[0].isIntersecting){const t=await R({offset:e});a(0,s=s.concat(t)),e+=20}},{rootMargin:"0px 0px 300px 0px"});return r.observe(t),()=>r.unobserve(t)}const r=()=>{const e=t.getBoundingClientRect();intersecting=e.bottom+bottom>0&&e.right+right>0&&e.top-top<window.innerHeight&&e.left-left<window.innerWidth,intersecting&&once&&window.removeEventListener("scroll",r)};return window.addEventListener("scroll",r),()=>window.removeEventListener("scroll",r)}),e.$set=(e=>{"articleList"in e&&a(0,s=e.articleList)}),[s,()=>{let e=[];for(let t=1920;t<2021;t++)e.push(t.toString());return e}]}export default class extends e{constructor(e){super(),t(this,e,G,C,a,{articleList:0,allYears:1})}get allYears(){return this.$$.ctx[1]}}export{W as preload};
